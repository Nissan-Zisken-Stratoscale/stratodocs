# Autoscaling – Setting Up and Using Scaling Groups

Autoscaling lets you make sure you have the correct number of EC2 instances available to handle the load for your application.

To implement autoscaling, you create collections of EC2 instances, called scaling groups.

When you create a scaling group, you specify the desired capacity of the group, and autoscaling ensures that your group has this many instances. Autoscaling performs health checks to detect when an instance is unhealthy, terminate it, and replace it with a new one.

**To implement autoscaling**, you:

1.  [Create a  **launch configuration**](https://www.stratoscale.com/knowledge/creating-a-launch-configuration). A launch configuration is a template that specifies the type of instance that autoscaling creates for you. Launch configurations specify things such as the image to use for launching an instance, the instance type, key pairs, and security groups.

2.  [Create a  **scaling group**](https://www.stratoscale.com/knowledge/creating-a-scaling-group). When you create a scaling group:

-   You specify the launch configuration to use for the VMs in the group.
-   You also specify the number of instances to maintain in the group, the type of health checks to use, and various other settings.

# Creating a Launch Configuration

When a scaling group automatically adds a new VM, the new VM inherits the characteristics defined in the scaling group's launch configuration.

**To create a launch configuration**:

1. Select  **Menu**  >  **Compute**  >  **Launch Config**  >  **Create**.

2. Fill in the following fields in the Create Launch Configuration dialog, then click  **Ok**

<table class="wrapped confluenceTable"><colgroup><col><col></colgroup><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>Name</strong></td><td class="confluenceTd">Name you want to give the launch configuration.</td></tr><tr><td class="confluenceTd"><strong>Image</strong></td><td class="confluenceTd">Select the image you want to base the scaling group's VMs on.</td></tr><tr><td class="confluenceTd"><strong>Instance Type</strong></td><td class="confluenceTd"><p>An instance type specifies the CPUs, RAM, and boot disk size to use for the instance. Select an instance type from the drop down menu.</p></td></tr><tr><td class="confluenceTd"><strong>Security Groups</strong></td><td class="confluenceTd">Optional. Select the <a href="https://www.stratoscale.com/knowledge/security-groups"><span class="confluence-link">security group(s)</span></a> you want the scaling group's VMs to use.</td></tr><tr><td class="confluenceTd"><strong>Key Pair</strong></td><td class="confluenceTd">Optional. Select the <a href="https://www.stratoscale.com/knowledge/enabling-secure-ssh-access-to-a-vm"><span class="confluence-link">key pair</span></a> you want the scaling group's VMs to use.</td></tr><tr><td class="confluenceTd"><strong>Read cloud-init from file</strong></td><td class="confluenceTd">Optional. If you want the scaling group's VMs to <span class="confluence-link">use <a href="https://www.stratoscale.com/knowledge/the-cloud-init-file">a cloud-init</a> file</span> during the boot process, specify the cloud init file here.</td></tr></tbody></table>

# Creating a Scaling Group

A scaling group is a collection of EC2 instances that your application can use to handle its workload. When you create a scaling group, you specify how many instances you want in the group. After the scaling group creates the instances, it monitors their health and makes sure you always have your desired number of instances.

**To create a scaling group**:

1. Select  **Menu**  >  **Compute**  >  **Scaling Group**  >  **Create**.

2. Fill in the following fields in the Create Scaling Group dialog, then click  **Ok**.

<table class="wrapped confluenceTable"><colgroup><col><col></colgroup><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>Name</strong></td><td class="confluenceTd">Name you want to give the scaling group.</td></tr><tr><td class="confluenceTd"><strong>Desired Capacity</strong></td><td class="confluenceTd">How many EC2 instances you want in the group.</td></tr><tr><td class="confluenceTd"><strong>Launch Configuration<br></strong></td><td class="confluenceTd"><p>The <a href="https://www.stratoscale.com/knowledge/creating-a-launch-configuration">launch configuration</a> you want to use for each EC2 instance in the group. Launch configurations are templates that specify the characteristics of each instance.</p></td></tr><tr><td class="confluenceTd"><strong>Networks<br></strong></td><td class="confluenceTd">The network(s) to which the instances are attached.</td></tr><tr><td class="confluenceTd"><strong>Target Groups<br></strong></td><td class="confluenceTd">Optional. If you want to <a href="https://www.stratoscale.com/knowledge/load-balancing-and-scaling-groups">associate the scaling group with one or more load balancer target groups</a>, select the target group(s) here.</td></tr><tr><td class="confluenceTd"><strong>Operation Cooldown<br></strong></td><td class="confluenceTd"><p>Optional. How many seconds to wait between the end of one scaling operation and the start of another.</p><p>The operation cooldown period helps to ensure that autoscaling doesn't launch or terminate additional instances before the previous scaling activity takes effect. After the scale group dynamically scales, it waits for the cooldown period to complete before resuming scaling activities.</p></td></tr><tr><td colspan="1" class="confluenceTd"><strong>Termination Policies<br></strong></td><td colspan="1" class="confluenceTd"><p>Optional. When the scaling group performs a scale-in operation (removes instances from the group), you can specify that it should follow one of these policies:</p><ul><li>Default. Terminate instances that have the oldest launch configuration.</li><li>Oldest Instance. Terminate the oldest instance in the group. This option is useful when you're upgrading the instances in the Auto Scaling group to a new EC2 instance type. You can gradually replace instances of the old type with instances of the new type.</li><li>Newest Instance. Terminate the newest instance in the group. This policy is useful when you're testing a new launch configuration but don't want to keep it in production.</li><li>Oldest Launch Configuration. Terminate instances that have the oldest launch configuration. This policy is useful when you're updating a group and phasing out the instances from a previous configuration.</li></ul></td></tr><tr><td colspan="1" class="confluenceTd"><strong>Health Check<br></strong></td><td colspan="1" class="confluenceTd"><p>Optional. Select the type of health check you want to use on the instances:</p><ul><li>VM Health -- Use VMware's VM Monitor tool.</li><li>Load Balancing -- Use ELB health checks. This choice is available only if you associate this scaling group with a load balancer target group.</li></ul></td></tr><tr><td colspan="1" class="confluenceTd"><strong>Protect instances from scale-in</strong></td><td colspan="1" class="confluenceTd"><p>Optional. Protects instances that get added to the group from ever being removed.</p><p>During the time period when this protect option is set for the group, any instances that get added to the scaling group are exempt from the group's termination policies – they will never be removed from the group.</p></td></tr></tbody></table>

# Load Balancing and Scaling Groups

You can  [associate a scaling group with a load balancer's target group](https://www.stratoscale.com/knowledge/creating-a-scaling-group). The scaling group then guarantees the load balancer that the load balancer will have a given number of healthy instances among which it can distribute an application's workload.

Consider the following scenario involving these four sample entities:

-   MyApplication
-   LoadBalancerA
-   TargetGroupA
-   ScalingGroupA

**Scenario**:

MyApplication directs its requests to LoadBalancerA.

[LoadBalancerA](https://www.stratoscale.com/knowledge/create-a-load-balancer)  is associated with  [TargetGroupA](https://www.stratoscale.com/knowledge/create-a-target-group). TargetGroupA has just one instance.

[ScalingGroupA](https://www.stratoscale.com/knowledge/creating-a-scaling-group)  is managing 20 instances (doing health checks and making sure that there are always 20 healthy instances available). ScalingGroup A is also associated with TargetGroupA.

Because of this association, LoadBalancerA can distribute MyApplication's work among 21 instances -- one in TargetGroupA and 20 in ScalingGroupA.

# Symphony-supported AWS – EC2 Auto Scaling APIs and Parameters

Symphony supports the following AWS - EC2 Auto Scaling API actions. For each action, Symphony supports only the parameters listed below.

For complete AWS documentation for each action, click the action's name.

<table class="wrapped confluenceTable" style="height: 1848px;"><colgroup><col style="width: 237.0px;"><col style="width: 257.0px;"><col style="width: 269.0px;"><col style="width: 197.0px;"></colgroup><tbody><tr style="height: 24px;"><th class="confluenceTh" style="height: 24px;">Name</th><th class="confluenceTh" style="height: 24px;">Required Parameters</th><th class="confluenceTh" style="height: 24px;">Optional Parameters</th><th class="confluenceTh" style="text-align: center; height: 24px;">Notes</th></tr><tr style="height: 80px;"><td class="confluenceTd" style="height: 80px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_AttachInstances.html" rel="nofollow">AttachInstances</a></td><td class="confluenceTd" style="height: 80px;"><ul><li>AutoScalingGroupName</li><li>InstanceIds</li></ul></td><td class="confluenceTd" style="height: 80px;"></td><td class="confluenceTd" style="height: 80px;"></td></tr><tr style="height: 80px;"><td class="confluenceTd" style="height: 80px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_AttachLoadBalancerTargetGroups.html" rel="nofollow">AttachLoadBalancerTargetGroups</a></td><td class="confluenceTd" style="height: 80px;"><ul><li>AutoScalingGroupName</li><li>TargetGroupARNs</li></ul></td><td class="confluenceTd" style="height: 80px;"></td><td class="confluenceTd" style="height: 80px;"></td></tr><tr style="height: 272px;"><td class="confluenceTd" style="height: 272px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_CreateAutoScalingGroup.html" rel="nofollow">CreateAutoScalingGroup</a></td><td class="confluenceTd" style="height: 272px;"><ul><li>AutoScalingGroupName</li><li>LaunchConfigurationName</li><li>MaxSize</li><li>MinSize</li></ul></td><td class="confluenceTd" style="height: 272px;"><ul><li>AvailabilityZones</li><li>DefaultCooldown</li><li>DesiredCapacity</li><li>HealthCheckGracePeriod</li><li>HealthCheckType</li><li>NewInstancesProtectedFromScaleIn</li><li>ServiceLinkedRoleARN</li><li>TargetGroupARNs</li><li>TerminationPolicies</li><li>VPCZoneIdentifier</li></ul></td><td class="confluenceTd" style="height: 272px;"></td></tr><tr style="height: 272px;"><td class="confluenceTd" style="height: 272px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_CreateLaunchConfiguration.html" rel="nofollow">CreateLaunchConfiguration</a></td><td class="confluenceTd" style="height: 272px;"><ul><li>LaunchConfigurationName</li><li>ImageId</li></ul></td><td class="confluenceTd" style="height: 272px;"><ul><li>KeyName</li><li>InstanceType</li><li>SecurityGroups</li><li>UserData</li><li>BlockDeviceMappings</li><li>RamdiskId</li><li>InstanceMonitoring</li><li>EbsOptimized</li><li>AssociatePublicIpAddress</li><li>PlacementTenancy</li></ul></td><td class="confluenceTd" style="height: 272px;"></td></tr><tr style="height: 56px;"><td class="confluenceTd" style="height: 56px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DeleteAutoScalingGroup.html" rel="nofollow">DeleteAutoScalingGroup</a></td><td class="confluenceTd" style="height: 56px;"><ul><li>AutoScalingGroupName</li></ul></td><td class="confluenceTd" style="height: 56px;"><ul><li>ForceDelete</li></ul></td><td class="confluenceTd" style="height: 56px;"></td></tr><tr style="height: 56px;"><td class="confluenceTd" style="height: 56px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DeleteLaunchConfiguration.html" rel="nofollow">DeleteLaunchConfiguration</a></td><td class="confluenceTd" style="height: 56px;"><ul><li>LaunchConfigurationName</li></ul></td><td class="confluenceTd" style="height: 56px;"></td><td class="confluenceTd" style="height: 56px;"></td></tr><tr style="height: 80px;"><td style="height: 80px;"><a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DeletePolicy.html">DeletePolicy</a></td><td style="height: 80px;"><ul><li>PolicyName</li><li>AutoScalingGroupName</li></ul></td><td style="height: 80px;"></td><td style="height: 80px;"></td></tr><tr style="height: 56px;"><td class="confluenceTd" style="height: 56px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DescribeAutoScalingGroups.html" rel="nofollow">DescribeAutoScalingGroups</a></td><td class="confluenceTd" style="height: 56px;"></td><td class="confluenceTd" style="height: 56px;"><ul><li>AutoScalingGroupNames</li></ul></td><td class="confluenceTd" style="height: 56px;"></td></tr><tr style="height: 56px;"><td class="confluenceTd" style="height: 56px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DescribeLaunchConfigurations.html" rel="nofollow">DescribeLaunchConfigurations</a></td><td class="confluenceTd" style="height: 56px;"></td><td class="confluenceTd" style="height: 56px;"><ul><li>LaunchConfigurationNames</li></ul></td><td class="confluenceTd" style="height: 56px;"></td></tr><tr style="height: 104px;"><td style="height: 104px;"><a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DescribePolicies.html">DescribePolicies</a></td><td style="height: 104px;"></td><td style="height: 104px;"><ul><li>AutoScalingGroupName</li><li>PolicyNames</li><li>PolicyTypes</li></ul></td><td style="height: 104px;"></td></tr><tr style="height: 104px;"><td class="confluenceTd" style="height: 104px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DetachInstances.html" rel="nofollow">DetachInstances</a></td><td class="confluenceTd" style="height: 104px;"><ul><li>AutoScalingGroupName</li><li>InstanceIds</li><li>ShouldDecrementDesiredCapacity</li></ul></td><td class="confluenceTd" style="height: 104px;"></td><td class="confluenceTd" style="height: 104px;"></td></tr><tr style="height: 80px;"><td class="confluenceTd" style="height: 80px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_DetachLoadBalancerTargetGroups.html" rel="nofollow">DetachLoadBalancerTargetGroups</a></td><td class="confluenceTd" style="height: 80px;"><ul><li>AutoScalingGroupName</li><li>TargetGroupARNs</li></ul></td><td class="confluenceTd" style="height: 80px;"></td><td class="confluenceTd" style="height: 80px;"></td></tr><tr style="height: 104px;"><td class="confluenceTd" style="height: 104px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_EnterStandby.html" rel="nofollow">EnterStandby</a></td><td class="confluenceTd" style="height: 104px;"><ul><li>AutoScalingGroupName</li><li>InstanceIds</li><li>ShouldDecrementDesiredCapacity</li></ul></td><td class="confluenceTd" style="height: 104px;"></td><td class="confluenceTd" style="height: 104px;"></td></tr><tr style="height: 80px;"><td class="confluenceTd" style="height: 80px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_ExitStandby.html" rel="nofollow">ExitStandby</a></td><td class="confluenceTd" style="height: 80px;"><ul><li>AutoScalingGroupName</li><li>InstanceIds</li></ul></td><td class="confluenceTd" style="height: 80px;"></td><td class="confluenceTd" style="height: 80px;"></td></tr><tr style="height: 24px;"><td style="height: 24px;"><a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_PutScalingPolicy.html">PutScalingPolicy</a></td><td style="height: 24px;"><ul><li>PolicyName</li><li>AutoScalingGroupName</li></ul></td><td style="height: 24px;"><ul><li>PolicyType</li><li>EstimatedInstanceWarmup</li><li>TargetTrackingConfiguration</li></ul></td><td style="height: 24px;"></td></tr><tr style="height: 320px;"><td class="confluenceTd" style="height: 320px;"><a class="external-link" href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_UpdateAutoScalingGroup.html" rel="nofollow">UpdateAutoScalingGroup</a></td><td class="confluenceTd" style="height: 320px;"><ul><li>AutoScalingGroupName</li></ul></td><td class="confluenceTd" style="height: 320px;"><ul><li>AvailabilityZones</li><li><span style="color: #0000ff;"><strong>DefaultCooldown</strong></span></li><li>DesiredCapacity</li><li>HealthCheckGracePeriod</li><li>HealthCheckType</li><li>LaunchConfigurationName</li><li>MaxSize</li><li>MinSize</li><li>NewInstancesProtectedFromScaleIn</li><li>ServiceLinkedRoleARN</li><li>TerminationPolicies</li><li>VPCZoneIdentifier</li></ul></td><td class="confluenceTd" style="vertical-align: top; height: 320px;"><p style="text-align: center;"><span style="color: #0000ff;">Modified</span><br> <span style="color: #0000ff;">Symphony v5.1.1</span></p></td></tr></tbody></table>

